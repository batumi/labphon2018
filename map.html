<!DOCTYPE html>
<html>
<head>
  <title>A D3 map</title>
  <script src="node_modules/d3/build/d3.min.js"></script>
  <script src="node_modules/d3-geo/build/d3-geo.js"></script>
  <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
  <script src="http://enjalot.github.io/intro-d3/lib/topojson.v1.min.js"></script>
  <!-- <script src="node_modules/geojson-georgian-regions/SubRegions_low_quality.json"></script> -->
  <!-- https://www.arcgis.com/home/item.html?id=ec63e68fcf304c639859ebbc29d0a0f0 -->
  <style>
  body {
    background: #666;
  }

  svg {
    background: #999;
  }
  </style>
</head>
<body>
  <div id="georgia"></div>
  <script>
    var width = 1000,
      height = 600;

    var svg = d3.select( "body" )
      .append( "svg" )
      .attr( "width", width )
      .attr( "height", height );

    var boundary = svg.append("g")
        .attr( "id", "boundary" );

    var countries = svg.append( "g" )
      .attr( "id", "countries" );

    var projection = d3.geoRobinson()
        .scale(150)
        .center([0,27])
        .rotate([-100,0] )
        .translate([width / 2, height / 2]);

    var path = d3.geoPath()
      .projection( projection );

    var boundaryFeature = {type:"Feature",geometry:{
      type: "Polygon",
      coordinates: [[
        [-180,89.99],
        [180,89.99],
        [180,-89.99],
        [-180,-89.99],
        [-180,89.99]
      ]]
    }}

    d3.json("https://batumi.github.io/geojson-georgian-regions/geo_regions.geojson", function(json){
      boundary
        .append( "path" )
        .datum( boundaryFeature )
        .attr( "d", path );

      countries.selectAll( "path" )
        .data( json.features )
        .enter()
        .append( "path" )
        .attr( "d", path );
    });

    fetch("https://batumi.github.io/geojson-georgian-regions/SubRegions_High_Quality.json")
      .then(function(res) {
        return res.json();
      }).then(function(geogianSubRegions) {
        console.log("geogianSubRegions", geogianSubRegions);

        var width = 420;
        var height = 400;

        // var projection = d3.geoOrthographic()
          //var projection = d3.geoAlbers()
        var projection = d3.geoMercator()
          .scale(170)
          .rotate([100, 0, 0])
          .translate([width / 2, height / 2])
          .clipAngle(90);

        var svg = d3.select('body')
          .append('svg')
          .attr('width', width)
          .attr('height', height);

        var path = d3.geoPath()
          .projection(projection);

        svg.append("path")
          .attr("d", path(geogianSubRegions.features[0].geometry.coordinates))
          .classed("land", true);
      });


    fetch("https://batumi.github.io/geojson-georgian-regions/geo_regions.geojson")
      .then(function(res) {
        return res.json();
      }).then(function(geogianSubRegions) {
        console.log("geogianSubRegions", geogianSubRegions);

        var width = 420;
        var height = 400;

        // var projection = d3.geoOrthographic()
          //var projection = d3.geoAlbers()
        var projection = d3.geoMercator()
          .scale(170)
          .rotate([100, 0, 0])
          .translate([width / 2, height / 2])
          .clipAngle(90);

        var svg = d3.select('body')
          .append('svg')
          .attr('width', width)
          .attr('height', height);

        var path = d3.geoPath()
          .projection(projection);

        svg.append("path")
          .attr("d", path(geogianSubRegions.features[0].geometry.coordinates))
          .classed("land", true);
      });


    fetch("https://batumi.github.io/geojson-georgian-regions/SubRegions_low_quality.json")
      .then(function(res) {
        return res.json();
      }).then(function(geogianSubRegions) {
        console.log("geogianSubRegions", geogianSubRegions);

        var width = 420;
        var height = 400;

        // var projection = d3.geoOrthographic()
          //var projection = d3.geoAlbers()
        var projection = d3.geoMercator()
          .scale(170)
          .rotate([100, 0, 0])
          .translate([width / 2, height / 2])
          .clipAngle(90);

        var svg = d3.select('body')
          .append('svg')
          .attr('width', width)
          .attr('height', height);

        var path = d3.geoPath()
          .projection(projection);

        svg.append("path")
          .attr("d", path(geogianSubRegions.features[0].geometry.coordinates))
          .classed("land", true);
      });

    d3.json("http://enjalot.github.io/intro-d3/maptime/data/world110.json", function(err, world) {
      console.log("data", world)
      var countries = topojson.feature(world, world.objects.land);
      console.log("countries", countries)

      var width = 420;
      var height = 400;

      var projection = d3.geoOrthographic()
        //var projection = d3.geo.albers()
        //var projection = d3.geo.mercator()
        .scale(170)
        .rotate([100, 0, 0])
        .translate([width / 2, height / 2])
        .clipAngle(90);

      var svg = d3.select('body')
        .append('svg')
        .attr('width', width)
        .attr('height', height);

      var path = d3.geoPath()
        .projection(projection);

      svg.append("path")
        .attr("d", path(countries))
        .classed("land", true);
    });

  </script>
</body>
</html>

